(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{4717:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/[id]",function(){return t(7615)}])},7615:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var n=t(5666),r=t.n(n),i=t(5893),a=t(1163),c=t(7294),o=t(4931),l=t(821),d=t(1133);function m(e){var s=e.comments,t=(0,c.useContext)(d.I).user,n=(0,c.useState)(""),r=n[0],a=n[1];return(0,i.jsxs)("ul",{children:[" ",s&&s.map((function(e){return(0,i.jsxs)("li",{className:"notification mediam ",children:[(0,i.jsxs)("div",{className:"box columns is-centered my-2",children:[(0,i.jsxs)("figure",{className:"media-left image column is-2-desktop is-2-tablet is-3-mobile ",children:[(0,i.jsx)("img",{className:"is-rounded",src:e.userid.image}),(0,i.jsx)("p",{className:"has-text-centered",children:(0,i.jsx)("strong",{children:e.userid.lastname})})]}),(0,i.jsx)("div",{className:"media-right column is-10-desktop is-10-tablet is-3-mobile",children:(0,i.jsx)("p",{children:e.commentText})})]}),(0,i.jsxs)("details",{className:"icons",children:[(0,i.jsx)("summary",{children:"reply"}),(0,i.jsx)("textarea",{className:"textarea is-primary",placeholder:"Primary textarea",rows:"2",disabled:!t,onChange:function(e){return a(e.target.value)}}),(0,i.jsxs)("button",{disabled:!t,className:"button",onClick:function(){return s=e._id,n=e.blogid,void fetch("https://blogs-app-server.vercel.app/comments",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify({commentText:r,userid:t._id,blogid:n,replyCommentId:s})}).then((function(e){return e.json()})).then((function(e){e.success?(o.ZP.success("Message Posted!"),a("")):o.ZP.error(e.message)}));var s,n},children:["\ud83d\ude80"," "]})]}),(0,i.jsx)(m,{comments:s.replyComments}),(0,i.jsx)(o.x7,{position:"top-center",reverseOrder:!1})]},e._id)}))," "]})}function u(e,s,t,n,r,i,a){try{var c=e[i](a),o=c.value}catch(l){return void t(l)}c.done?s(o):Promise.resolve(o).then(n,r)}function h(e){var s,t=(0,a.useRouter)().query,n=(0,c.useRef)(),h=(0,c.useContext)(d.I).user,x=(0,l.ZP)({url:"https://blogs-app-server.vercel.app/blogs/".concat(t.id),url2:"https://blogs-app-server.vercel.app/comments"},(s=r().mark((function e(s){var n,i,a,c,o,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.url,i=s.url2,e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.next=9,fetch(i);case 9:return o=e.sent,e.next=12,o.json();case 12:return l=e.sent,d=l.data.filter((function(e){return e.blogid===t.id})),console.log(d),e.abrupt("return",{blog:c.data,comments:d});case 16:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function a(e){u(i,n,r,a,c,"next",e)}function c(e){u(i,n,r,a,c,"throw",e)}a(void 0)}))})),p=x.data,g=x.error;if(!p)return(0,i.jsx)("h2",{children:"Loading ........."});if(g)return(0,i.jsx)("h2",{children:"something is going wrong"});return(0,i.jsxs)("div",{className:"section columns is-centered",children:[(0,i.jsxs)("div",{className:"column is-8 ",children:[(0,i.jsxs)("div",{className:"hero has-text-centered is-primary ",children:[(0,i.jsxs)("article",{className:"media px-3 pt-5",children:[(0,i.jsx)("figure",{className:"media-left image is-64x64",children:(0,i.jsx)("img",{className:"is-rounded",src:p.blog.userid.image})}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:p.blog.userid.fullname})," ",(0,i.jsxs)("small",{children:["@j",p.blog.userid.lastname]})," ",(0,i.jsx)("small",{children:"31m"})]})]}),(0,i.jsx)("h2",{className:"title",children:p.blog.title}),(0,i.jsx)("h3",{className:"sub-title has-text-dark",children:p.blog.description})]}),(0,i.jsx)("figure",{className:"image is-4by3",children:(0,i.jsx)("img",{src:p.blog.image,alt:"Placeholder image"})}),(0,i.jsx)("div",{className:"section has-text-weight-medium is-family-monospace",children:(0,i.jsx)("p",{children:p.blog.content})}),(0,i.jsxs)("div",{className:"section",children:[(0,i.jsx)("div",{className:"notification",children:(0,i.jsx)("h2",{children:"Comments"})}),(0,i.jsxs)("div",{className:"box",children:[(0,i.jsx)("textarea",{disabled:!h,className:"textarea is-primary",placeholder:h?"Write Comment ...":"Registered Users Only !",ref:n}),(0,i.jsxs)("button",{disabled:!h,className:"button",onClick:function(){console.log(n.current.value);var e=JSON.stringify({commentText:n.current.value,userid:h._id,blogid:p.blog._id});fetch("https://blogs-app-server.vercel.app/comments",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:e}).then((function(e){return e.json()})).then((function(e){e.success?(o.ZP.success("Message Posted!"),n.current.value=""):o.ZP.error(e.message)}))},children:["\ud83d\ude80"," "]}),(0,i.jsx)(m,{comments:p.comments})]})]})]}),(0,i.jsx)(o.x7,{position:"top-center",reverseOrder:!1})]})}}},function(e){e.O(0,[931,821,774,888,179],(function(){return s=4717,e(e.s=s);var s}));var s=e.O();_N_E=s}]);